{
  "version": 3,
  "file": "iwe7-core.umd.js",
  "sources": [
    "ng://iwe7-core/out/src/base-component.ts",
    "ng://iwe7-core/out/src/core.module.ts",
    "ng://iwe7-core/out/src/get-view-ref.directive.ts"
  ],
  "sourcesContent": [
    "// 给予rxjs设计的组件\nimport {\n  Input,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectorRef,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { Observable, merge } from 'rxjs';\nimport { first, filter, takeWhile } from 'rxjs/operators';\n\nexport abstract class Iwe7Base<T> implements OnChanges, OnInit, OnDestroy {\n  @Input() props: Observable<T> = new Observable();\n  // 需要注销开关\n  needDestory: boolean = false;\n  constructor(public cd: ChangeDetectorRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ('props' in changes) {\n      if (!changes['props'].isFirstChange) {\n        this.__propsHandler();\n      }\n    }\n  }\n  /**\n   * 注销\n   */\n  ngOnDestroy() {\n    this.needDestory = true;\n  }\n\n  ngOnInit() {\n    this.__propsHandler();\n  }\n\n  setProps(props: Observable<T>) {\n    this.props = merge(this.props, props);\n    this.__propsHandler();\n  }\n\n  private __propsHandler() {\n    this.props = merge(\n      // 添加默认值\n      this.props.pipe(first((val, idx) => idx === 0, {} as T)),\n      this.props\n    ).pipe(\n      // 去除{}\n      filter(val => Object.keys(val).length > 0),\n      // 自动注销\n      takeWhile(val => !this.needDestory)\n    );\n    this.props.subscribe(res => {\n      this.onPropsChange(res);\n      this.cd.markForCheck();\n    });\n  }\n\n  public abstract onPropsChange(res: T): void;\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GetViewRefDirective } from './get-view-ref.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [GetViewRefDirective],\n  exports: [GetViewRefDirective],\n  entryComponents: []\n})\nexport class Iwe7CoreModule {}\n",
    "import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[getViewRef]',\n  exportAs: 'getViewRef'\n})\nexport class GetViewRefDirective {\n\n  constructor(\n    public view: ViewContainerRef\n  ) { }\n\n}\n"
  ],
  "names": [
    "Input",
    "merge",
    "first",
    "filter",
    "takeWhile",
    "Observable",
    "CommonModule",
    "NgModule",
    "ViewContainerRef",
    "Directive"
  ],
  "mappings": ";;;;;;AEAA,IAAA,mBAAA,kBAAA,YAAA;IAQE,SAAF,mBAAA,CACW,IADX,EAAA;QACW,IAAX,CAAA,IAAe,GAAJ,IAAI,CAAf;KACO;;;;IARP,EAAA,IAAA,EAACS,cAAS,EAAV,IAAA,EAAA,CAAW;gBACT,QAAQ,EAAE,cAAc;gBACxB,QAAQ,EAAE,YAAY;aACvB,EAAD,EAAA;;;IALA,EAAA,IAAA,EAAoBD,qBAAgB,GAApC;;ADAA,IAAA,cAAA,kBAAA,YAAA;IAAA,SAAA,cAAA,GAAA;;;;;IAIA,EAAA,IAAA,EAACD,aAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,OAAO,EAAE,CAACD,mBAAY,CAAC;gBACvB,YAAY,EAAE,CAAC,mBAAmB,CAAC;gBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;gBAC9B,eAAe,EAAE,EAAE;aACpB,EAAD,EAAA;;ADGA,IAAA,QAAA,kBAAA,YAAA;IAIE,SAAF,QAAA,CAAqB,EAAqB,EAA1C;QAAqB,IAArB,CAAA,EAAuB,GAAF,EAAE,CAAmB;QAH1C,IAAA,CAAA,KAAA,GAAkC,IAAID,eAAU,EAAE,CAAlD;QAEA,IAAA,CAAA,WAAA,GAAyB,KAAK,CAA9B;KAC8C;IAE5C,QAAF,CAAA,SAAA,CAAA,WAAa,GAAX,UAAY,OAAsB,EAApC;QACI,IAAI,OAAO,IAAI,OAAO,EAAE;YACtB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,aAAa,EAAE;gBACnC,IAAI,CAAC,cAAc,EAAE,CAAC;aACvB;SACF;KACF,CAAH;IAIE,QAAF,CAAA,SAAA,CAAA,WAAa,GAAX,YAAF;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KACzB,CAAH;IAEE,QAAF,CAAA,SAAA,CAAA,QAAU,GAAR,YAAF;QACI,IAAI,CAAC,cAAc,EAAE,CAAC;KACvB,CAAH;IAEE,QAAF,CAAA,SAAA,CAAA,QAAU,GAAR,UAAS,KAAoB,EAA/B;QACI,IAAI,CAAC,KAAK,GAAGJ,UAAK,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,cAAc,EAAE,CAAC;KACvB,CAAH;IAEU,QAAV,CAAA,SAAA,CAAA,cAAwB,GAAd,YAAV;QAAU,IAAV,KAAA,GAAA,IAAA,CAAA;QACI,IAAI,CAAC,KAAK,GAAGA,UAAK,CAEhB,IAAI,CAAC,KAAK,CAAC,IAAI,CAACC,eAAK,CAAC,UAAC,GAAG,EAAE,GAAG,EAFrC,EAE0C,OAAA,GAAG,KAAK,CAAC,CAFnD,EAEmD,GAAE,EAAO,EAAC,CAAC,EACxD,IAAI,CAAC,KAAK,CACX,CAAC,IAAI,CAEJC,gBAAM,CAAC,UAAA,GAAG,EANhB,EAMoB,OAAA,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAN/C,EAM+C,CAAC,EAE1CC,mBAAS,CAAC,UAAA,GAAG,EARnB,EAQuB,OAAA,CAAC,KAAI,CAAC,WAAW,CARxC,EAQwC,CAAC,CACpC,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,UAAA,GAAG,EAA5B;YACM,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YACxB,KAAI,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC;SACxB,CAAC,CAAC;;;;;IA1CP,OAAA,EAAA,CAAA,EAAA,IAAA,EAAGJ,UAAK,EAAR,EAAA;;;;;;;;;;;;;;;"
}
