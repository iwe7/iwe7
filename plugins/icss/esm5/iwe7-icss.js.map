{
  "version": 3,
  "file": "iwe7-icss.js",
  "sources": [
    "ng://iwe7-icss/out/src/icss.service.ts",
    "ng://iwe7-icss/out/src/icss.module.ts"
  ],
  "sourcesContent": [
    "import { Injectable, ElementRef } from '@angular/core';\nimport { Subject, Observable, of, MonoTypeOperatorFunction, merge } from 'rxjs';\nimport { map, scan, throttle, throttleTime, first } from 'rxjs/operators';\nexport interface IcssInterface {\n  [key: string]: Observable<any>;\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class IcssService {\n  state: any = {};\n  constructor() {}\n  init(ob: IcssInterface, ele?: ElementRef) {\n    const obs: Observable<{ [key: string]: any }>[] = [];\n    for (const key in ob) {\n      const newOb = ob[key].pipe(\n        map(res => {\n          return {\n            [`${key}`]: res\n          };\n        })\n      );\n      obs.push(newOb);\n    }\n    // 合并流\n    const mer = merge(...obs).pipe(\n      scan((state, style) => {\n        return { ...state, ...style };\n      }, {}),\n      map(style => {\n        this.styledash(ele.nativeElement).set(style);\n        return style;\n      })\n    );\n    mer.pipe(first()).subscribe(res => {\n      this.state = res;\n    });\n    mer.subscribe(res => {});\n    return mer;\n  }\n\n  getState(key?: string) {\n    if (!!key) {\n      return this.state[key] || {};\n    }\n    return this.state;\n  }\n\n  private parse(val: any) {\n    return typeof val === 'boolean' ? (!!val ? 1 : 0) : val;\n  }\n\n  private styledash(target: HTMLElement) {\n    return {\n      set: (key, val?) => {\n        if (typeof key === 'object' && val === undefined) {\n          return Object.keys(key).forEach(subKey =>\n            this.styledash(target).set(subKey, key[subKey])\n          );\n        }\n        if (typeof val === 'object') {\n          return Object.keys(val).forEach(subkey => {\n            this.styledash(target).set(`${key}-${subkey}`, val[subkey]);\n          });\n        }\n        return target.style.setProperty(`--${key}`, this.parse(val) as string);\n      },\n      get: key => target.style.getPropertyValue(`--${key}`)\n    };\n  }\n\n  vendorPrefix() {\n    if (typeof window === 'undefined' || typeof document === 'undefined')\n      return '';\n    const styles = window.getComputedStyle(document.documentElement, '') || [\n      '-moz-hidden-iframe'\n    ];\n    const pre = (Array.prototype.slice\n      .call(styles)\n      .join('')\n      .match(/-(moz|webkit|ms)-/) ||\n      ((<any>styles).OLink === '' && ['', 'o']))[1];\n    switch (pre) {\n      case 'ms':\n        return 'ms';\n      default:\n        return pre && pre.length ? pre[0].toUpperCase() + pre.substr(1) : '';\n    }\n  }\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule]\n})\nexport class IcssModule {}\n"
  ],
  "names": [],
  "mappings": "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"
}
