{
  "version": 3,
  "file": "iwe7-cache.js",
  "sources": [
    "ng://iwe7/cache/out/src/subscribers.service.ts",
    "ng://iwe7/cache/out/src/chache-memory.service.ts",
    "ng://iwe7/cache/out/src/cache.module.ts"
  ],
  "sourcesContent": [
    "import { Injectable } from '@angular/core';\nimport { CacheMemory } from './chache-memory.service';\nimport { Subscription } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SubscribersService extends CacheMemory<Subscription> {\n  desc: string = '大家好我是，subscribers service，我服保存订阅';\n  constructor() {\n    super();\n  }\n\n  private unsubscribe(key: string) {\n    let sub = this.get(key);\n    if (sub && sub['unsubscribe']) {\n      sub.unsubscribe();\n    }\n  }\n\n  public addSub(key: string, subscribtion: Subscription): this {\n    this.unsubscribe(key);\n    this.set(key, subscribtion);\n    return this;\n  }\n\n  public destory(key: string) {\n    this.unsubscribe(key);\n    this.delete(key);\n  }\n}\n",
    "import { Injectable } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { map } from 'underscore';\n\nexport abstract class CacheMemory<T> {\n  data: Map<string, any> = new Map();\n  data$: Subject<Map<string, any>> = new Subject();\n  constructor() {}\n\n  onChange(): Observable<Map<string, any>> {\n    return this.data$;\n  }\n\n  init(data: any) {\n    this.data = new Map(data);\n  }\n  // 取数据\n  get(key: string): T {\n    return this.data.get(key) || {};\n  }\n  // 设置数据\n  set(key: string, val: any): this {\n    this.data.set(key, val);\n    this.data$.next(this.data);\n    return this;\n  }\n  // 删除数据\n  delete(key: string): this {\n    this.data.delete(key);\n    this.data$.next(this.data);\n    return this;\n  }\n  // 清空\n  clear(): this {\n    this.data.clear();\n    this.data$.next(this.data);\n    return this;\n  }\n  // 是否存在\n  has(key: string) {\n    return this.data.has(key);\n  }\n  // 循环\n  forEach(\n    callbackfn: (value: any, key: string, map: Map<string, any>) => void\n  ): this {\n    this.data.forEach(callbackfn);\n    return this;\n  }\n  // 保存到缓存\n  saveToLocalStorage(key: string) {\n    let data = {};\n    this.forEach((item, key, map) => {\n      data[key] = item;\n    });\n    localStorage.setItem(key, JSON.stringify(data));\n  }\n\n  initFromLoacalStorage(key: string) {\n    let item: any = localStorage.getItem(key);\n    if (!!item) {\n      item = JSON.parse(item);\n      let data: any = map(item, (item, key) => {\n        return [key + '', item];\n      });\n      this.data = new Map(data);\n      return this;\n    }\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CacheMemoryService<T> extends CacheMemory<T> {\n  name: string = '大家好，我是cache memory service，你能把临时数据交给我保存！';\n  constructor(){\n    super();\n  }\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule]\n})\nexport class CacheModule {}\n"
  ],
  "names": [
    "tslib_1.__extends",
    "map"
  ],
  "mappings": "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"
}
