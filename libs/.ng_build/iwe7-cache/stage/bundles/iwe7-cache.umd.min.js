!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("underscore")):"function"==typeof define&&define.amd?define("iwe7/cache",["exports","@angular/core","@angular/common","rxjs","underscore"],e):e((t.iwe7=t.iwe7||{},t.iwe7.cache={}),t.ng.core,t.ng.common,t.rxjs,t.underscore)}(this,function(t,e,r,n,o){"use strict";var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function i(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var c=function(){};c.decorators=[{type:e.NgModule,args:[{imports:[r.CommonModule]}]}];var s=function(){function t(){this.data=new Map,this.data$=new n.Subject}return t.prototype.onChange=function(){return this.data$},t.prototype.init=function(t){this.data=new Map(t)},t.prototype.get=function(t){return this.data.get(t)||{}},t.prototype.set=function(t,e){return this.data.set(t,e),this.data$.next(this.data),this},t.prototype["delete"]=function(t){return this.data["delete"](t),this.data$.next(this.data),this},t.prototype.clear=function(){return this.data.clear(),this.data$.next(this.data),this},t.prototype.has=function(t){return this.data.has(t)},t.prototype.forEach=function(t){return this.data.forEach(t),this},t.prototype.saveToLocalStorage=function(t){var n={};this.forEach(function(t,e,r){n[e]=t}),localStorage.setItem(t,JSON.stringify(n))},t.prototype.initFromLoacalStorage=function(t){var e=localStorage.getItem(t);if(e){e=JSON.parse(e);var r=o.map(e,function(t,e){return[e+"",t]});return this.data=new Map(r),this}},t}(),u=function(e){function t(){var t=e.call(this)||this;return t.name="大家好，我是cache memory service，你能把临时数据交给我保存！",t}return i(t,e),t}(s);u.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[]},u.ngInjectableDef=e.defineInjectable({factory:function(){return new u},token:u,providedIn:"root"});var p=function(e){function t(){var t=e.call(this)||this;return t.desc="大家好我是，subscribers service，我服保存订阅",t}return i(t,e),t.prototype.unsubscribe=function(t){var e=this.get(t);e&&e.unsubscribe&&e.unsubscribe()},t.prototype.addSub=function(t,e){return this.unsubscribe(t),this.set(t,e),this},t.prototype.destory=function(t){this.unsubscribe(t),this["delete"](t)},t}(s);p.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],p.ctorParameters=function(){return[]},p.ngInjectableDef=e.defineInjectable({factory:function(){return new p},token:p,providedIn:"root"}),t.CacheModule=c,t.CacheMemoryService=u,t.SubscribersService=p,t.ɵa=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=iwe7-cache.umd.min.js.map
