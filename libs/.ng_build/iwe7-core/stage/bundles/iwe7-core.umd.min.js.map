{
  "version": 3,
  "file": "iwe7-core.umd.min.js",
  "sources": [
    "ng://iwe7/core/out/src/get-view-ref.directive.ts",
    "ng://iwe7/core/out/src/core.module.ts",
    "ng://iwe7/core/out/src/base-component.ts"
  ],
  "sourcesContent": [
    "import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[getViewRef]',\n  exportAs: 'getViewRef'\n})\nexport class GetViewRefDirective {\n\n  constructor(\n    public view: ViewContainerRef\n  ) { }\n\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GetViewRefDirective } from './get-view-ref.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [GetViewRefDirective],\n  exports: [GetViewRefDirective],\n  entryComponents: []\n})\nexport class Iwe7CoreModule {}\n",
    "// 给予rxjs设计的组件\nimport {\n  Input,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectorRef,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { Observable, merge } from 'rxjs';\nimport { first, filter, takeWhile } from 'rxjs/operators';\n\nexport abstract class Iwe7Base<T> implements OnChanges, OnInit, OnDestroy {\n  @Input() props: Observable<T> = new Observable();\n  // 需要注销开关\n  needDestory: boolean = false;\n  constructor(public cd: ChangeDetectorRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ('props' in changes) {\n      if (!changes['props'].isFirstChange) {\n        this.__propsHandler();\n      }\n    }\n  }\n  /**\n   * 注销\n   */\n  ngOnDestroy() {\n    this.needDestory = true;\n  }\n\n  ngOnInit() {\n    this.__propsHandler();\n  }\n\n  setProps(props: Observable<T>) {\n    this.props = merge(this.props, props);\n    this.__propsHandler();\n  }\n\n  private __propsHandler() {\n    this.props = merge(\n      // 添加默认值\n      this.props.pipe(first((val, idx) => idx === 0, {} as T)),\n      this.props\n    ).pipe(\n      // 去除{}\n      filter(val => Object.keys(val).length > 0),\n      // 自动注销\n      takeWhile(val => !this.needDestory)\n    );\n    this.props.subscribe(res => {\n      this.onPropsChange(res);\n      this.cd.markForCheck();\n    });\n  }\n\n  public abstract onPropsChange(res: T): void;\n}\n"
  ],
  "names": [
    "GetViewRefDirective",
    "view",
    "this",
    "type",
    "Directive",
    "args",
    "selector",
    "exportAs",
    "ViewContainerRef",
    "Iwe7CoreModule",
    "NgModule",
    "imports",
    "CommonModule",
    "declarations",
    "exports",
    "entryComponents",
    "Iwe7Base",
    "cd",
    "props",
    "Observable",
    "needDestory",
    "prototype",
    "ngOnChanges",
    "changes",
    "isFirstChange",
    "__propsHandler",
    "ngOnDestroy",
    "ngOnInit",
    "setProps",
    "merge",
    "_this",
    "pipe",
    "first",
    "val",
    "idx",
    "filter",
    "Object",
    "keys",
    "length",
    "takeWhile",
    "subscribe",
    "res",
    "onPropsChange",
    "markForCheck",
    "Input"
  ],
  "mappings": "mbAAA,IAAAA,EAQE,SACSC,GAAAC,KAAXD,KAAWA,iBAPX,CAAAE,KAACC,EAAAA,UAADC,KAAA,CAAW,CACTC,SAAU,eACVC,SAAU,oDAJZ,CAAAJ,KAAoBK,EAAAA,oBCApB,IAAAC,EAAA,2BAIA,CAAAN,KAACO,EAAAA,SAADL,KAAA,CAAU,CACRM,QAAS,CAACC,EAAAA,cACVC,aAAc,CAACb,GACfc,QAAS,CAACd,GACVe,gBAAiB,OCInB,IAAAC,EAAA,WAIE,SAAFA,EAAqBC,GAAAf,KAArBe,GAAqBA,EAHrBf,KAAAgB,MAAkC,IAAIC,EAAAA,WAEtCjB,KAAAkB,aAAyB,SAGvBJ,EAAFK,UAAAC,YAAE,SAAYC,GACN,UAAWA,IACRA,EAAe,MAAEC,eACpBtB,KAAKuB,mBAOXT,EAAFK,UAAAK,YAAE,WACExB,KAAKkB,aAAc,GAGrBJ,EAAFK,UAAAM,SAAE,WACEzB,KAAKuB,kBAGPT,EAAFK,UAAAO,SAAE,SAASV,GACPhB,KAAKgB,MAAQW,EAAAA,MAAM3B,KAAKgB,MAAOA,GAC/BhB,KAAKuB,kBAGCT,EAAVK,UAAAI,eAAU,WAAA,IAAVK,EAAA5B,KACIA,KAAKgB,MAAQW,EAAAA,MAEX3B,KAAKgB,MAAMa,KAAKC,EAAAA,MAAM,SAACC,EAAKC,GAAQ,OAAQ,IAARA,GAAS,KAC7ChC,KAAKgB,OACLa,KAEAI,EAAAA,OAAO,SAAAF,GAAO,OAA0B,EAA1BG,OAAOC,KAAKJ,GAAKK,SAE/BC,EAAAA,UAAU,SAAAN,GAAO,OAACH,EAAKV,eAEzBlB,KAAKgB,MAAMsB,UAAU,SAAAC,GACnBX,EAAKY,cAAcD,GACnBX,EAAKb,GAAG0B,oBA1Cd,qBACAzB,MAAA,CAAA,CAAAf,KAAGyC,EAAAA"
}
