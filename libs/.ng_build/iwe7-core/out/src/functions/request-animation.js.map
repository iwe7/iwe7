{"version":3,"file":"request-animation.js","sourceRoot":"","sources":["request-animation.ts"],"names":[],"mappings":";;;;AAAA,uBAAM,gBAAgB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;;;;AAEjD;IACE,qBAAI,QAAQ,GAAG,CAAC,CAAC;IACjB,MAAM,CAAC,UAAS,QAA8B;QAC5C,uBAAM,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;QACtC,uBAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;QAC3D,uBAAM,EAAE,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;YAChC,QAAQ,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC;SACjC,EAAE,UAAU,CAAC,CAAC;QACf,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;QACjC,MAAM,CAAC,EAAE,CAAC;KACX,CAAC;CACH;;;;AAED;IACE,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;KACnB;IACD,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC;QACjC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAClD;IACD,uBAAM,MAAM,GAAG,gBAAgB,CAAC,MAAM,CACpC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,uBAAuB,IAAI,MAAM,CAC/C,CAAC,CAAC,CAAC,CAAC;IACL,MAAM,CAAC,MAAM;QACX,CAAC,CAAC,MAAM,CAAC,GAAG,MAAM,uBAAuB,CAAC;QAC1C,CAAC,CAAC,6BAA6B,EAAE,CAAC;CACrC;;;;;AAED,MAAM,sCAAsC,EAAU;IACpD,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC;KACb;IACD,EAAE,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAChC,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;KACxC;IACD,uBAAM,MAAM,GAAG,gBAAgB,CAAC,MAAM,CACpC,GAAG,CAAC,EAAE,CACJ,GAAG,GAAG,sBAAsB,IAAI,MAAM;QACtC,GAAG,GAAG,6BAA6B,IAAI,MAAM,CAChD,CAAC,CAAC,CAAC,CAAC;IAEL,MAAM,CAAC,MAAM;QACX,CAAC,CAAC,CACE,mBAAC,MAAa,EAAC,CAAC,GAAG,MAAM,sBAAsB,CAAC;YAChD,mBAAC,MAAa,EAAC,CAAC,GAAG,MAAM,6BAA6B,CAAC,CACxD,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC;QAClB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;CACtB;AAED,MAAM,CAAC,uBAAM,YAAY,GAAG,wBAAwB,EAAE,CAAC","sourcesContent":["const availablePrefixs = ['moz', 'ms', 'webkit'];\n\nfunction requestAnimationFramePolyfill(): typeof requestAnimationFrame {\n  let lastTime = 0;\n  return function(callback: FrameRequestCallback): number {\n    const currTime = new Date().getTime();\n    const timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    const id = window.setTimeout(() => {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n}\n\nfunction getRequestAnimationFrame(): typeof requestAnimationFrame {\n  if (typeof window === 'undefined') {\n    return () => null;\n  }\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame.bind(window);\n  }\n  const prefix = availablePrefixs.filter(\n    key => `${key}RequestAnimationFrame` in window\n  )[0];\n  return prefix\n    ? window[`${prefix}RequestAnimationFrame`]\n    : requestAnimationFramePolyfill();\n}\n\nexport function cancelRequestAnimationFrame(id: number): any {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  if (window.cancelAnimationFrame) {\n    return window.cancelAnimationFrame(id);\n  }\n  const prefix = availablePrefixs.filter(\n    key =>\n      `${key}CancelAnimationFrame` in window ||\n      `${key}CancelRequestAnimationFrame` in window\n  )[0];\n\n  return prefix\n    ? (\n        (window as any)[`${prefix}CancelAnimationFrame`] ||\n        (window as any)[`${prefix}CancelRequestAnimationFrame`]\n      ).call(this, id)\n    : clearTimeout(id);\n}\n\nexport const reqAnimFrame = getRequestAnimationFrame();\n"]}