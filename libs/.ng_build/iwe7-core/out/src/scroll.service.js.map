{"version":3,"file":"scroll.service.js","sourceRoot":"","sources":["scroll.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport {\n  Inject,\n  Injectable,\n  Optional,\n  Provider,\n  SkipSelf\n} from '@angular/core';\n\nimport { reqAnimFrame } from './functions/request-animation';\n\nexport type EasyingFn = (t: number, b: number, c: number, d: number) => number;\n\nfunction easeInOutCubic(t: number, b: number, c: number, d: number): number {\n  const cc = c - b;\n  let tt = t / (d / 2);\n  if (tt < 1) {\n    return cc / 2 * tt * tt * tt + b;\n  } else {\n    return cc / 2 * ((tt -= 2) * tt * tt + 2) + b;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScrollService {\n  private doc: Document;\n  constructor(@Inject(DOCUMENT) doc: any) {\n    this.doc = doc;\n  }\n  setScrollTop(el: Element | Window, topValue: number = 0): void {\n    if (el === window) {\n      this.doc.body.scrollTop = topValue;\n      this.doc.documentElement.scrollTop = topValue;\n    } else {\n      (el as Element).scrollTop = topValue;\n    }\n  }\n  getOffset(el: Element): { top: number; left: number } {\n    const ret = {\n      top: 0,\n      left: 0\n    };\n    if (!el || !el.getClientRects().length) return ret;\n    const rect = el.getBoundingClientRect();\n    if (rect.width || rect.height) {\n      const doc = el.ownerDocument.documentElement;\n      ret.top = rect.top - doc.clientTop;\n      ret.left = rect.left - doc.clientLeft;\n    } else {\n      ret.top = rect.top;\n      ret.left = rect.left;\n    }\n    return ret;\n  }\n\n  getScroll(el?: Element | Window, top: boolean = true): number {\n    const target = el ? el : window;\n    const prop = top ? 'pageYOffset' : 'pageXOffset';\n    const method = top ? 'scrollTop' : 'scrollLeft';\n    const isWindow = target === window;\n    let ret = isWindow ? target[prop] : target[method];\n    if (isWindow && typeof ret !== 'number') {\n      ret = this.doc.documentElement[method];\n    }\n    return ret;\n  }\n  scrollTo(\n    containerEl: Element | Window,\n    targetTopValue: number = 0,\n    easing?: EasyingFn,\n    callback?: () => void\n  ): void {\n    const target = containerEl ? containerEl : window;\n    const scrollTop = this.getScroll(target);\n    const startTime = Date.now();\n    const frameFunc = () => {\n      const timestamp = Date.now();\n      const time = timestamp - startTime;\n      this.setScrollTop(\n        target,\n        (easing || easeInOutCubic)(time, scrollTop, targetTopValue, 450)\n      );\n      if (time < 450) {\n        reqAnimFrame(frameFunc);\n      } else {\n        if (callback) callback();\n      }\n    };\n    reqAnimFrame(frameFunc);\n  }\n}\n"]}