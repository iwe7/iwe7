{
  "version": 3,
  "file": "iwe7-icss.js",
  "sources": [
    "ng://iwe7/icss/out/src/icss.service.ts",
    "ng://iwe7/icss/out/src/icss.module.ts"
  ],
  "sourcesContent": [
    "import { Injectable, ElementRef } from '@angular/core';\nimport { Subject, Observable, of, MonoTypeOperatorFunction, merge } from 'rxjs';\nimport { map, scan, throttle, throttleTime, first } from 'rxjs/operators';\nexport interface IcssInterface {\n  [key: string]: Observable<any>;\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class IcssService {\n  state: any = {};\n  constructor() {}\n  init(ob: IcssInterface, ele?: ElementRef) {\n    const obs: Observable<{ [key: string]: any }>[] = [];\n    for (const key in ob) {\n      const newOb = ob[key].pipe(\n        map(res => {\n          return {\n            [`${key}`]: res\n          };\n        })\n      );\n      obs.push(newOb);\n    }\n    // 合并流\n    const mer = merge(...obs).pipe(\n      scan((state, style) => {\n        return { ...state, ...style };\n      }, {}),\n      map(style => {\n        this.styledash(ele.nativeElement).set(style);\n        return style;\n      })\n    );\n    mer.pipe(first()).subscribe(res => {\n      this.state = res;\n    });\n    mer.subscribe(res => {});\n    return mer;\n  }\n\n  getState(key?: string) {\n    if (!!key) {\n      return this.state[key] || {};\n    }\n    return this.state;\n  }\n\n  private parse(val: any) {\n    return typeof val === 'boolean' ? (!!val ? 1 : 0) : val;\n  }\n\n  private styledash(target: HTMLElement) {\n    return {\n      set: (key, val?) => {\n        if (typeof key === 'object' && val === undefined) {\n          return Object.keys(key).forEach(subKey =>\n            this.styledash(target).set(subKey, key[subKey])\n          );\n        }\n        if (typeof val === 'object') {\n          return Object.keys(val).forEach(subkey => {\n            this.styledash(target).set(`${key}-${subkey}`, val[subkey]);\n          });\n        }\n        return target.style.setProperty(`--${key}`, this.parse(val) as string);\n      },\n      get: key => target.style.getPropertyValue(`--${key}`)\n    };\n  }\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule]\n})\nexport class IcssModule {}\n"
  ],
  "names": [],
  "mappings": "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"
}
