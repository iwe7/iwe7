{
  "version": 3,
  "file": "iwe7-core.js",
  "sources": [
    "ng://iwe7/core/out/src/base-component.ts",
    "ng://iwe7/core/out/src/core.module.ts",
    "ng://iwe7/core/out/src/get-view-ref.directive.ts"
  ],
  "sourcesContent": [
    "// 给予rxjs设计的组件\nimport {\n  Input,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectorRef,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { Observable, merge } from 'rxjs';\nimport { first, filter, takeWhile } from 'rxjs/operators';\n\nexport abstract class Iwe7Base<T> implements OnChanges, OnInit, OnDestroy {\n  @Input() props: Observable<T> = new Observable();\n  // 需要注销开关\n  needDestory: boolean = false;\n  constructor(public cd: ChangeDetectorRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ('props' in changes) {\n      if (!changes['props'].isFirstChange) {\n        this.__propsHandler();\n      }\n    }\n  }\n  /**\n   * 注销\n   */\n  ngOnDestroy() {\n    this.needDestory = true;\n  }\n\n  ngOnInit() {\n    this.__propsHandler();\n  }\n\n  setProps(props: Observable<T>) {\n    this.props = merge(this.props, props);\n    this.__propsHandler();\n  }\n\n  private __propsHandler() {\n    this.props = merge(\n      // 添加默认值\n      this.props.pipe(first((val, idx) => idx === 0, {} as T)),\n      this.props\n    ).pipe(\n      // 去除{}\n      filter(val => Object.keys(val).length > 0),\n      // 自动注销\n      takeWhile(val => !this.needDestory)\n    );\n    this.props.subscribe(res => {\n      this.onPropsChange(res);\n      this.cd.markForCheck();\n    });\n  }\n\n  public abstract onPropsChange(res: T): void;\n}\n",
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GetViewRefDirective } from './get-view-ref.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [GetViewRefDirective],\n  exports: [GetViewRefDirective],\n  entryComponents: []\n})\nexport class Iwe7CoreModule {}\n",
    "import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[getViewRef]',\n  exportAs: 'getViewRef'\n})\nexport class GetViewRefDirective {\n\n  constructor(\n    public view: ViewContainerRef\n  ) { }\n\n}\n"
  ],
  "names": [],
  "mappings": ";;;;;AEAA;IAQE,6BACS,IADX;QACW,IAAX,CAAA,IAAe,GAAJ,IAAI,CAAf;KACO;;;;IARP,EAAA,IAAA,EAAC,SAAS,EAAV,IAAA,EAAA,CAAW;gBACT,QAAQ,EAAE,cAAc;gBACxB,QAAQ,EAAE,YAAY;aACvB,EAAD,EAAA;;;IALA,EAAA,IAAA,EAAoB,gBAAgB,GAApC;;ADAA;IAAA;;;;;IAIA,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,OAAO,EAAE,CAAC,YAAY,CAAC;gBACvB,YAAY,EAAE,CAAC,mBAAmB,CAAC;gBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;gBAC9B,eAAe,EAAE,EAAE;aACpB,EAAD,EAAA;;ADGA;IAIE,kBAAmB,EAAqB;QAArB,IAArB,CAAA,EAAuB,GAAF,EAAE,CAAmB;QAH1C,IAAA,CAAA,KAAA,GAAkC,IAAI,UAAU,EAAE,CAAlD;QAEA,IAAA,CAAA,WAAA,GAAyB,KAAK,CAA9B;KAC8C;IAE5C,8BAAW,GAAX,UAAY,OAAsB;QAChC,IAAI,OAAO,IAAI,OAAO,EAAE;YACtB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,aAAa,EAAE;gBACnC,IAAI,CAAC,cAAc,EAAE,CAAC;aACvB;SACF;KACF;IAID,8BAAW,GAAX;QACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KACzB;IAED,2BAAQ,GAAR;QACE,IAAI,CAAC,cAAc,EAAE,CAAC;KACvB;IAED,2BAAQ,GAAR,UAAS,KAAoB;QAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,cAAc,EAAE,CAAC;KACvB;IAEO,iCAAc,GAAd;QAAA;QACN,IAAI,CAAC,KAAK,GAAG,KAAK,CAEhB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,UAAC,GAAG,EAAE,GAAG,IAAK,OAAA,GAAG,KAAK,CAAC,GAAA,GAAE,EAAO,EAAC,CAAC,EACxD,IAAI,CAAC,KAAK,CACX,CAAC,IAAI,CAEJ,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,GAAA,CAAC,EAE1C,SAAS,CAAC,UAAA,GAAG,IAAI,OAAA,CAAC,KAAI,CAAC,WAAW,GAAA,CAAC,CACpC,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,UAAA,GAAG;YACtB,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YACxB,KAAI,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC;SACxB,CAAC,CAAC;;;;;IA1CP,OAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,EAAA;;;;;"
}
