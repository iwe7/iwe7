!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("rxjs"),require("rxjs/operators"),require("rxjs/observable/fromPromise"),require("underscore")):"function"==typeof define&&define.amd?define("iwe7/lazy-load",["exports","@angular/core","@angular/common","@angular/router","rxjs","rxjs/operators","rxjs/observable/fromPromise","underscore"],o):o((e.iwe7=e.iwe7||{},e.iwe7["lazy-load"]={}),e.ng.core,e.ng.common,e.ng.router,e.rxjs,e.Rx.Observable.prototype,e.Rx.Observable,e.underscore)}(this,function(e,o,t,r,a,n,i,u){"use strict";function c(e,o){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,n,a=t.call(e),i=[];try{for(;(void 0===o||0<o--)&&!(r=a.next()).done;)i.push(r.value)}catch(u){n={error:u}}finally{try{r&&!r.done&&(t=a["return"])&&t.call(a)}finally{if(n)throw n.error}}return i}var l=function(){function o(){}return o.forRoot=function(e){return{ngModule:o,providers:[{provide:r.ROUTES,useValue:e,multi:!0}]}},o}();l.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule],declarations:[]}]}];var s=new o.InjectionToken("LAZY_COMPONENTS",{providedIn:"root",factory:function(){return[]}}),f=new Map,d=function(){function e(e){this.moduleFactoryLoader=e}return e.prototype.load=function(r){var e=this;return new Promise(function(t,o){e.moduleFactoryLoader.load(r).then(function(e){var o=new p(e);f.set(r,o),t(o)})["catch"](function(e){o(e)})})},e.prototype.getComponentModuleByPath=function(e){var t=f.get(e);return t?new Promise(function(e,o){e(t)}):this.load(e)},e}(),p=function(){function e(e){this.moduleFactory=e}return e.prototype.getComponent=function(e,o){var t=this.moduleFactory.create(o),r=t.componentFactoryResolver,n=t.instance.getComponentByName(e);return r.resolveComponentFactory(n)},e}(),m=function(){function e(e,o,t){var r=this;this.moduleFactoryLoader=e,this.moduleRef=o,this.lazyComponentConfig=t,this.components=new Map,this.lazyComponentModuleFactory=new d(this.moduleFactoryLoader),this.lazyComponentConfig=u.flatten(this.lazyComponentConfig),this.lazyComponentConfig.map(function(e){r.components.set(e.selector,e.loadChildren)})}return e.prototype.init=function(o,t){var r=this,e=Array.from(this.components.keys()).filter(function(e){return o.querySelector(e)});if(!e.length)return a.of(undefined);var n=[];return e.forEach(function(e){n.push(r.createComponent(e,t))}),a.merge.apply(void 0,function(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(c(arguments[o]));return e}(n))},e.prototype.createComponent=function(o,t){var r=this,e=this.components.get(o);return i.fromPromise(this.lazyComponentModuleFactory.getComponentModuleByPath(e)).pipe(n.map(function(e){return e.getComponent(o,r.moduleRef.injector)}),n.tap(function(e){t.createComponent(e)}))},e}();m.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:o.NgModuleFactoryLoader},{type:o.NgModuleRef},{type:Array,decorators:[{type:o.Inject,args:[s]}]}]},m.ngInjectableDef=o.defineInjectable({factory:function(){return new m(o.inject(o.NgModuleFactoryLoader),o.inject(o.NgModuleRef),o.inject(s))},token:m,providedIn:"root"});var y=function(){};e.Iwe7LazyLoadModule=l,e.LazyLoaderService=m,e.LazyComponentModuleBase=y,e.LazyComponentModule=p,e.LazyComponentModuleFactory=d,e.LAZY_COMPONENTS=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=iwe7-lazy-load.umd.min.js.map
