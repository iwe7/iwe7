!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("rxjs"),require("rxjs/operators"),require("rxjs/observable/fromPromise"),require("underscore"),require("rxjs/observable/fromEvent"),require("iwe7/lazy-load"),require("iwe7-core")):"function"==typeof define&&define.amd?define("iwe7",["exports","@angular/core","@angular/common","@angular/router","rxjs","rxjs/operators","rxjs/observable/fromPromise","underscore","rxjs/observable/fromEvent","iwe7/lazy-load","iwe7-core"],t):t(e.iwe7={},e.ng.core,e.ng.common,e.ng.router,e.rxjs,e.Rx.Observable.prototype,e.Rx.Observable,e.underscore,e.Rx.Observable,e.iwe7["lazy-load"],e.iwe7Core)}(this,function(e,t,r,o,a,u,n,i,s,p,c){"use strict";var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function d(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var y=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:o.ROUTES,useValue:e,multi:!0}]}},t}();y.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],declarations:[]}]}];var g=new t.InjectionToken("LAZY_COMPONENTS",{providedIn:"root",factory:function(){return[]}}),m=new Map,h=function(){function e(e){this.moduleFactoryLoader=e}return e.prototype.load=function(o){var e=this;return new Promise(function(r,t){e.moduleFactoryLoader.load(o).then(function(e){var t=new v(e);m.set(o,t),r(t)})["catch"](function(e){t(e)})})},e.prototype.getComponentModuleByPath=function(e){var r=m.get(e);return r?new Promise(function(e,t){e(r)}):this.load(e)},e}(),v=function(){function e(e){this.moduleFactory=e}return e.prototype.getComponent=function(e,t){var r=this.moduleFactory.create(t),o=r.componentFactoryResolver,n=r.instance.getComponentByName(e);return o.resolveComponentFactory(n)},e}(),b=function(){function e(e,t,r){var o=this;this.moduleFactoryLoader=e,this.moduleRef=t,this.lazyComponentConfig=r,this.components=new Map,this.lazyComponentModuleFactory=new h(this.moduleFactoryLoader),this.lazyComponentConfig=i.flatten(this.lazyComponentConfig),this.lazyComponentConfig.map(function(e){o.components.set(e.selector,e.loadChildren)})}return e.prototype.init=function(t,r){var o=this,e=Array.from(this.components.keys()).filter(function(e){return t.querySelector(e)});if(!e.length)return a.of(undefined);var n=[];return e.forEach(function(e){n.push(o.createComponent(e,r))}),a.merge.apply(void 0,l(n))},e.prototype.createComponent=function(t,r){var o=this,e=this.components.get(t);return n.fromPromise(this.lazyComponentModuleFactory.getComponentModuleByPath(e)).pipe(u.map(function(e){return e.getComponent(t,o.moduleRef.injector)}),u.tap(function(e){r.createComponent(e)}))},e}();b.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:t.NgModuleFactoryLoader},{type:t.NgModuleRef},{type:Array,decorators:[{type:t.Inject,args:[g]}]}]},b.ngInjectableDef=t.defineInjectable({factory:function(){return new b(t.inject(t.NgModuleFactoryLoader),t.inject(t.NgModuleRef),t.inject(g))},token:b,providedIn:"root"});var C=function(){},w=function(){};w.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule]}]}];var I=function(){function e(){this.state={}}return e.prototype.init=function(t,r){var o=this,n=[],e=function(r){var e=t[r].pipe(u.map(function(e){return(t={})[""+r]=e,t;var t}));n.push(e)};for(var i in t)e(i);var s=a.merge.apply(void 0,l(n)).pipe(u.scan(function(e,t){return Object.assign({},e,t)},{}),u.map(function(e){return o.styledash(r.nativeElement).set(e),e}));return s.pipe(u.first()).subscribe(function(e){o.state=e}),s.subscribe(function(e){}),s},e.prototype.getState=function(e){return e?this.state[e]||{}:this.state},e.prototype.parse=function(e){return"boolean"==typeof e?e?1:0:e},e.prototype.styledash=function(o){var n=this;return{set:function(t,r){return"object"==typeof t&&r===undefined?Object.keys(t).forEach(function(e){return n.styledash(o).set(e,t[e])}):"object"==typeof r?Object.keys(r).forEach(function(e){n.styledash(o).set(t+"-"+e,r[e])}):o.style.setProperty("--"+t,n.parse(r))},get:function(e){return o.style.getPropertyValue("--"+e)}}},e}();I.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[]},I.ngInjectableDef=t.defineInjectable({factory:function(){return new I},token:I,providedIn:"root"});var j=function(e){this.view=e};j.decorators=[{type:t.Directive,args:[{selector:"[getViewRef]",exportAs:"getViewRef"}]}],j.ctorParameters=function(){return[{type:t.ViewContainerRef}]};var M=function(){};M.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],declarations:[j],exports:[j],entryComponents:[]}]}];var D=function(){function e(e){this.cd=e,this.props=new a.Observable,this.needDestory=!1}return e.prototype.ngOnChanges=function(e){"props"in e&&(e.props.isFirstChange||this.__propsHandler())},e.prototype.ngOnDestroy=function(){this.needDestory=!0},e.prototype.ngOnInit=function(){this.__propsHandler()},e.prototype.setProps=function(e){this.props=a.merge(this.props,e),this.__propsHandler()},e.prototype.__propsHandler=function(){var t=this;this.props=a.merge(this.props.pipe(u.first(function(e,t){return 0===t},{})),this.props).pipe(u.filter(function(e){return 0<Object.keys(e).length}),u.takeWhile(function(e){return!t.needDestory})),this.props.subscribe(function(e){t.onPropsChange(e),t.cd.markForCheck()})},e}();D.propDecorators={props:[{type:t.Input}]};var O=function(){function e(e,t,r,o){this._viewContainerRef=e,this.template=t,this.renderer2=r,this.lazyloador=o,this.designSetting=!1,this.designDebug=!1,this.viewContainerRef=e}return e.prototype.ngOnInit=function(){this.designDebug},e.prototype.ngOnChanges=function(e){"design"in e&&this.createComponent()},e.prototype.createComponent=function(){this.viewContainerRef.clear();var e=this.design.name||null;this.lazyloador.createComponent(e,this._viewContainerRef).subscribe(function(e){})},e.prototype.setStyle=function(r){var o=this;i.map(this.design.style,function(e,t){o.renderer2.setStyle(r,""+t,e)})},e.prototype.setDrag=function(t){var r=t.ele.nativeElement;this.etAttribute({draggable:!0},r),s.fromEvent(r,"dragstart").subscribe(function(e){t.id,e.dataTransfer.setData("name","guid_"+t.guid),e.stopPropagation()}),s.fromEvent(r,"dragend").subscribe(function(e){console.log(r)})},e.prototype.setDrop=function(e){var t=e.ele.nativeElement;s.fromEvent(t,"drop").subscribe(function(e){})},e.prototype.etAttribute=function(e,t){if(!t)return"";for(var r in e)"boolean"==typeof e[r]?e[r]?this.renderer2.setAttribute(t,r,"true"):this.renderer2.removeAttribute(t,r):this.renderer2.setAttribute(t,r,e[r])},e}();O.decorators=[{type:t.Directive,args:[{selector:"[iwe7Design],[design],[designClass],[designStyle],[designDrag],[designDrop],[designInstance]"}]}],O.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:t.TemplateRef},{type:t.Renderer2},{type:p.LazyLoaderService}]},O.propDecorators={design:[{type:t.Input}],designClass:[{type:t.Input}],designStyle:[{type:t.Input}],designDrag:[{type:t.Input}],designDrop:[{type:t.Input}],designSetting:[{type:t.Input}],designDebug:[{type:t.Input}]};var _=function(){};_.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],declarations:[O]}]}];var P=function(t){function e(e){return t.call(this,e)||this}return function(e,t){function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(e,t),e}(c.Iwe7Base);e.Iwe7LazyLoadModule=y,e.LazyLoaderService=b,e.LazyComponentModuleBase=C,e.LazyComponentModule=v,e.LazyComponentModuleFactory=h,e.LAZY_COMPONENTS=g,e.IcssModule=w,e.IcssService=I,e.Iwe7CoreModule=M,e.Iwe7Base=D,e.GetViewRefDirective=j,e.Iwe7DesignModule=_,e.Iwe7DesignBase=P,e.Éµa=O,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=iwe7.umd.min.js.map
